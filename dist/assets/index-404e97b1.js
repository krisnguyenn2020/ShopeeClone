import{r as w,A as y,u as v,a as b,j as s,L as E,b as A}from"./index-918bb280.js";import{u as L,o as M,s as S}from"./rules-b624a482.js";import{i as R,I as n,B as I}from"./Button-50c3ff83.js";import{l as P}from"./lodash-f887d903.js";function H(){var c,l,m;const{setIsAuthenticated:g,setProfile:u}=w.useContext(y),x=v(),{register:a,handleSubmit:h,formState:{errors:t},watch:_,getValues:B,setError:f}=L({resolver:M(S)}),r=b({mutationFn:o=>A.registerAccount(o)}),j=h(o=>{const N=P.omit(o,["confirm_password"]);r.mutate(N,{onSuccess:e=>{u(e.data.data.user),g(!0),x("/")},onError:e=>{var d;if(R(e)){const i=(d=e.response)==null?void 0:d.data.data;i&&Object.keys(i).forEach(p=>{f(p,{type:"Server",message:i[p]})})}}})});return s.jsx("div",{className:"bg-orange",children:s.jsx("div",{className:"container",children:s.jsx("div",{className:"grid grid-cols-1 py-20 lg:grid-cols-5 lg:py-12 lg:pr-10",children:s.jsx("div",{className:"lg:col-span-2 lg:col-start-4",children:s.jsxs("form",{className:"rounded bg-white p-10 shadow-sm",onSubmit:j,noValidate:!0,children:[s.jsx("div",{className:"text-4xl",children:"Register"}),s.jsx(n,{name:"email",register:a,type:"email",placeholder:"Email",errorMessage:(c=t.email)==null?void 0:c.message,className:"mt-8"}),s.jsx(n,{name:"password",register:a,type:"password",className:"mt-2",errorMessage:(l=t.password)==null?void 0:l.message,placeholder:"Password"}),s.jsx(n,{name:"confirm_password",register:a,type:"password",className:"mt-2",errorMessage:(m=t.confirm_password)==null?void 0:m.message,placeholder:"Password"}),s.jsx("div",{className:"mt-2",children:s.jsx(I,{type:"submit",isLoading:r.isLoading,disabled:r.isLoading,className:"mt-2 flex w-full items-center justify-center bg-red-500 px-2 py-4 text-center text-sm uppercase text-white",children:"Register"})}),s.jsxs("div",{className:"mt-2 mt-8 flex items-center justify-center",children:[s.jsx("span",{className:"text-gray-400",children:"Have an account?"}),s.jsx(E,{className:" ml-2 text-red-400",to:"/login",children:"Login"})]})]})})})})})}export{H as default};
